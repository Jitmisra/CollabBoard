{"ast":null,"code":"import React,{useState,useEffect}from'react';import JoinRoom from'./components/JoinRoom';import CollaborationRoom from'./components/CollaborationRoom';import{useSocket}from'./hooks/useSocket';import{getStoredUser,storeUser,clearStoredUser}from'./utils/storage';import Toast from'./components/Toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[roomId,setRoomId]=useState(null);const[isConnected,setIsConnected]=useState(false);const[toast,setToast]=useState(null);const socket=useSocket();// Load stored user data on app start\nuseEffect(()=>{const storedUser=getStoredUser();if(storedUser){setUser(storedUser);}},[]);// Handle socket connection status\nuseEffect(()=>{if(!socket)return;const handleConnect=()=>{setIsConnected(true);showToast('Connected to server','success');};const handleDisconnect=()=>{setIsConnected(false);showToast('Disconnected from server','error');};const handleConnectError=error=>{console.error('Connection error:',error);showToast('Failed to connect to server','error');};socket.on('connect',handleConnect);socket.on('disconnect',handleDisconnect);socket.on('connect_error',handleConnectError);// Check initial connection status\nif(socket.connected){setIsConnected(true);}return()=>{socket.off('connect',handleConnect);socket.off('disconnect',handleDisconnect);socket.off('connect_error',handleConnectError);};},[socket]);const handleJoinRoom=userData=>{setUser(userData);setRoomId(userData.roomId);storeUser(userData);// Join room via socket\nif(socket){socket.emit('join-room',{roomId:userData.roomId,username:userData.username});}};const handleLeaveRoom=()=>{setUser(null);setRoomId(null);clearStoredUser();// Disconnect and reconnect to leave room\nif(socket){socket.disconnect();socket.connect();}};const showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setToast({message,type});setTimeout(()=>setToast(null),3000);};// Show loading screen while socket is connecting\nif(!socket){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Connecting to server\",/*#__PURE__*/_jsx(\"span\",{className:\"loading-dots\"})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-0 left-0 right-0 z-50 transition-all duration-300 \".concat(isConnected?'bg-green-500':'bg-red-500',\" text-white text-center py-1 text-sm\"),children:isConnected?'ðŸŸ¢ Connected':'ðŸ”´ Disconnected - Attempting to reconnect...'}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-8\",children:!user||!roomId?/*#__PURE__*/_jsx(JoinRoom,{onJoinRoom:handleJoinRoom}):/*#__PURE__*/_jsx(CollaborationRoom,{user:user,roomId:roomId,socket:socket,onLeaveRoom:handleLeaveRoom,showToast:showToast})}),toast&&/*#__PURE__*/_jsx(Toast,{message:toast.message,type:toast.type,onClose:()=>setToast(null)})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","JoinRoom","CollaborationRoom","useSocket","getStoredUser","storeUser","clearStoredUser","Toast","jsx","_jsx","jsxs","_jsxs","App","user","setUser","roomId","setRoomId","isConnected","setIsConnected","toast","setToast","socket","storedUser","handleConnect","showToast","handleDisconnect","handleConnectError","error","console","on","connected","off","handleJoinRoom","userData","emit","username","handleLeaveRoom","disconnect","connect","message","type","arguments","length","undefined","setTimeout","className","children","concat","onJoinRoom","onLeaveRoom","onClose"],"sources":["/Users/jitmisra/Desktop/ralwayhackathon/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport JoinRoom from './components/JoinRoom';\nimport CollaborationRoom from './components/CollaborationRoom';\nimport { useSocket } from './hooks/useSocket';\nimport { getStoredUser, storeUser, clearStoredUser } from './utils/storage';\nimport Toast from './components/Toast';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [roomId, setRoomId] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [toast, setToast] = useState(null);\n  \n  const socket = useSocket();\n\n  // Load stored user data on app start\n  useEffect(() => {\n    const storedUser = getStoredUser();\n    if (storedUser) {\n      setUser(storedUser);\n    }\n  }, []);\n\n  // Handle socket connection status\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleConnect = () => {\n      setIsConnected(true);\n      showToast('Connected to server', 'success');\n    };\n\n    const handleDisconnect = () => {\n      setIsConnected(false);\n      showToast('Disconnected from server', 'error');\n    };\n\n    const handleConnectError = (error) => {\n      console.error('Connection error:', error);\n      showToast('Failed to connect to server', 'error');\n    };\n\n    socket.on('connect', handleConnect);\n    socket.on('disconnect', handleDisconnect);\n    socket.on('connect_error', handleConnectError);\n\n    // Check initial connection status\n    if (socket.connected) {\n      setIsConnected(true);\n    }\n\n    return () => {\n      socket.off('connect', handleConnect);\n      socket.off('disconnect', handleDisconnect);\n      socket.off('connect_error', handleConnectError);\n    };\n  }, [socket]);\n\n  const handleJoinRoom = (userData) => {\n    setUser(userData);\n    setRoomId(userData.roomId);\n    storeUser(userData);\n    \n    // Join room via socket\n    if (socket) {\n      socket.emit('join-room', {\n        roomId: userData.roomId,\n        username: userData.username\n      });\n    }\n  };\n\n  const handleLeaveRoom = () => {\n    setUser(null);\n    setRoomId(null);\n    clearStoredUser();\n    \n    // Disconnect and reconnect to leave room\n    if (socket) {\n      socket.disconnect();\n      socket.connect();\n    }\n  };\n\n  const showToast = (message, type = 'info') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  };\n\n  // Show loading screen while socket is connecting\n  if (!socket) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Connecting to server<span className=\"loading-dots\"></span></p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Connection status indicator */}\n      <div className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${\n        isConnected ? 'bg-green-500' : 'bg-red-500'\n      } text-white text-center py-1 text-sm`}>\n        {isConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected - Attempting to reconnect...'}\n      </div>\n\n      {/* Main content */}\n      <div className=\"pt-8\">\n        {!user || !roomId ? (\n          <JoinRoom onJoinRoom={handleJoinRoom} />\n        ) : (\n          <CollaborationRoom\n            user={user}\n            roomId={roomId}\n            socket={socket}\n            onLeaveRoom={handleLeaveRoom}\n            showToast={showToast}\n          />\n        )}\n      </div>\n\n      {/* Toast notifications */}\n      {toast && (\n        <Toast\n          message={toast.message}\n          type={toast.type}\n          onClose={() => setToast(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}