{"ast":null,"code":"import React,{useState,useEffect}from'react';import Whiteboard from'./Whiteboard';import NotesEditor from'./NotesEditor';import UsersList from'./UsersList';import RoomHeader from'./RoomHeader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CollaborationRoom=_ref=>{let{user,roomId,socket,onLeaveRoom,showToast}=_ref;const[activeTab,setActiveTab]=useState('whiteboard');const[users,setUsers]=useState([]);const[roomData,setRoomData]=useState({whiteboardData:[],notesData:''});// Handle socket events\nuseEffect(()=>{if(!socket)return;// Handle room data loading\nconst handleRoomData=data=>{setRoomData({whiteboardData:data.whiteboardData||[],notesData:data.notesData||''});};// Handle users list updates\nconst handleUsersUpdate=usersList=>{setUsers(usersList);};// Handle user join notifications\nconst handleUserJoined=data=>{if(data.username!==user.username){showToast(\"\".concat(data.username,\" joined the room\"),'info');}};// Handle user leave notifications\nconst handleUserLeft=data=>{showToast(\"\".concat(data.username,\" left the room\"),'info');};// Handle connection errors\nconst handleError=error=>{showToast(error.message||'An error occurred','error');};// Register event listeners\nsocket.on('room-data',handleRoomData);socket.on('users-update',handleUsersUpdate);socket.on('user-joined',handleUserJoined);socket.on('user-left',handleUserLeft);socket.on('error',handleError);return()=>{socket.off('room-data',handleRoomData);socket.off('users-update',handleUsersUpdate);socket.off('user-joined',handleUserJoined);socket.off('user-left',handleUserLeft);socket.off('error',handleError);};},[socket,user.username,showToast]);const handleTabChange=tab=>{setActiveTab(tab);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(RoomHeader,{user:user,roomId:roomId,onLeaveRoom:onLeaveRoom,showToast:showToast}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 h-[calc(100vh-4rem)]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTabChange('whiteboard'),className:\"py-4 px-1 border-b-2 font-medium text-sm transition-colors \".concat(activeTab==='whiteboard'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"})}),\"Whiteboard\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTabChange('notes'),className:\"py-4 px-1 border-b-2 font-medium text-sm transition-colors \".concat(activeTab==='notes'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Notes\"]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden\",children:activeTab==='whiteboard'?/*#__PURE__*/_jsx(Whiteboard,{socket:socket,roomId:roomId,initialData:roomData.whiteboardData,showToast:showToast}):/*#__PURE__*/_jsx(NotesEditor,{socket:socket,roomId:roomId,initialContent:roomData.notesData,showToast:showToast})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 bg-white border-l border-gray-200 flex flex-col\",children:/*#__PURE__*/_jsx(UsersList,{users:users,currentUser:user.username})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTabChange('whiteboard'),className:\"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors \".concat(activeTab==='whiteboard'?'bg-primary-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:\"Whiteboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTabChange('notes'),className:\"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors \".concat(activeTab==='notes'?'bg-primary-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:\"Notes\"})]})})]});};export default CollaborationRoom;","map":{"version":3,"names":["React","useState","useEffect","Whiteboard","NotesEditor","UsersList","RoomHeader","jsx","_jsx","jsxs","_jsxs","CollaborationRoom","_ref","user","roomId","socket","onLeaveRoom","showToast","activeTab","setActiveTab","users","setUsers","roomData","setRoomData","whiteboardData","notesData","handleRoomData","data","handleUsersUpdate","usersList","handleUserJoined","username","concat","handleUserLeft","handleError","error","message","on","off","handleTabChange","tab","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","initialData","initialContent","currentUser"],"sources":["/Users/jitmisra/Desktop/ralwayhackathon/frontend/src/components/CollaborationRoom.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Whiteboard from './Whiteboard';\nimport NotesEditor from './NotesEditor';\nimport UsersList from './UsersList';\nimport RoomHeader from './RoomHeader';\n\nconst CollaborationRoom = ({ user, roomId, socket, onLeaveRoom, showToast }) => {\n  const [activeTab, setActiveTab] = useState('whiteboard');\n  const [users, setUsers] = useState([]);\n  const [roomData, setRoomData] = useState({\n    whiteboardData: [],\n    notesData: ''\n  });\n\n  // Handle socket events\n  useEffect(() => {\n    if (!socket) return;\n\n    // Handle room data loading\n    const handleRoomData = (data) => {\n      setRoomData({\n        whiteboardData: data.whiteboardData || [],\n        notesData: data.notesData || ''\n      });\n    };\n\n    // Handle users list updates\n    const handleUsersUpdate = (usersList) => {\n      setUsers(usersList);\n    };\n\n    // Handle user join notifications\n    const handleUserJoined = (data) => {\n      if (data.username !== user.username) {\n        showToast(`${data.username} joined the room`, 'info');\n      }\n    };\n\n    // Handle user leave notifications\n    const handleUserLeft = (data) => {\n      showToast(`${data.username} left the room`, 'info');\n    };\n\n    // Handle connection errors\n    const handleError = (error) => {\n      showToast(error.message || 'An error occurred', 'error');\n    };\n\n    // Register event listeners\n    socket.on('room-data', handleRoomData);\n    socket.on('users-update', handleUsersUpdate);\n    socket.on('user-joined', handleUserJoined);\n    socket.on('user-left', handleUserLeft);\n    socket.on('error', handleError);\n\n    return () => {\n      socket.off('room-data', handleRoomData);\n      socket.off('users-update', handleUsersUpdate);\n      socket.off('user-joined', handleUserJoined);\n      socket.off('user-left', handleUserLeft);\n      socket.off('error', handleError);\n    };\n  }, [socket, user.username, showToast]);\n\n  const handleTabChange = (tab) => {\n    setActiveTab(tab);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Room Header */}\n      <RoomHeader\n        user={user}\n        roomId={roomId}\n        onLeaveRoom={onLeaveRoom}\n        showToast={showToast}\n      />\n\n      <div className=\"flex flex-1 h-[calc(100vh-4rem)]\">\n        {/* Main Content Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Tab Navigation */}\n          <div className=\"bg-white border-b border-gray-200\">\n            <div className=\"px-4\">\n              <nav className=\"flex space-x-8\">\n                <button\n                  onClick={() => handleTabChange('whiteboard')}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\n                    activeTab === 'whiteboard'\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <div className=\"flex items-center\">\n                    <svg className=\"h-5 w-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n                    </svg>\n                    Whiteboard\n                  </div>\n                </button>\n                <button\n                  onClick={() => handleTabChange('notes')}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\n                    activeTab === 'notes'\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <div className=\"flex items-center\">\n                    <svg className=\"h-5 w-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                    Notes\n                  </div>\n                </button>\n              </nav>\n            </div>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"flex-1 overflow-hidden\">\n            {activeTab === 'whiteboard' ? (\n              <Whiteboard\n                socket={socket}\n                roomId={roomId}\n                initialData={roomData.whiteboardData}\n                showToast={showToast}\n              />\n            ) : (\n              <NotesEditor\n                socket={socket}\n                roomId={roomId}\n                initialContent={roomData.notesData}\n                showToast={showToast}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Sidebar - Users List */}\n        <div className=\"w-80 bg-white border-l border-gray-200 flex flex-col\">\n          <UsersList users={users} currentUser={user.username} />\n        </div>\n      </div>\n\n      {/* Mobile Tab Switcher (visible on small screens) */}\n      <div className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2\">\n        <div className=\"flex space-x-4\">\n          <button\n            onClick={() => handleTabChange('whiteboard')}\n            className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n              activeTab === 'whiteboard'\n                ? 'bg-primary-600 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Whiteboard\n          </button>\n          <button\n            onClick={() => handleTabChange('notes')}\n            className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n              activeTab === 'notes'\n                ? 'bg-primary-600 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Notes\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CollaborationRoom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}